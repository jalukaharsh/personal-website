---
interface Props {
  title: string;
  pubDate: Date;
  slug: string;
  tags?: string[];
  collection?: string;
}

const { title, pubDate, slug, tags, collection = 'blog' } = Astro.props;

const formattedDate = pubDate.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});
---

<article class="card-tron rounded-lg">
  <h2 class="text-2xl font-bold mb-3">
    <a href={`/${collection}/${slug}`} class="card-link">
      {title}
    </a>
  </h2>
  
  <time datetime={pubDate.toISOString()} class="text-sm card-date block mb-4">
    {formattedDate}
  </time>
  
  {tags && tags.length > 0 && (
    <div class="card-tags-container">
      {tags.map(tag => (
        <a 
          href={`/${collection}/tag/${tag}`}
          class="card-tag"
        >
          {tag}
        </a>
      ))}
    </div>
  )}
</article>

<style>
  
  /* Card container with Graphite Gray background */
  article.card-tron {
    background-color: var(--color-bg-secondary); /* Graphite Gray */
    border: 1px solid var(--color-border);
    padding: var(--spacing-6);
    transition: var(--transition-colors);
    transition-delay: var(--transition-delay-none);
  }

  article.card-tron:hover {
    border-color: var(--colour-electric-blue-on-hover); /* Electric Blue on hover */
  }

  /* Title link - white text on dark background */
  .card-link {
    color: var(--color-text-on-dark); /* White text */
    transition: var(--transition-colors);
    transition-delay: var(--transition-delay-none);
  }

  .card-link:hover {
    color: var(--colour-electric-blue-on-hover); /* Electric Blue on hover */
    text-decoration: none;
  }

  /* Date - muted text color */
  .card-date {
    color: var(--color-text-muted); /* Muted gray for metadata */
  }

  /* Tags container */
  .card-tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-2);
    margin-top: var(--spacing-6);
  }

  /* Tags - Electric Blue accent with light background */
  .card-tag {
    font-size: var(--font-size-xs);
    background-color: var(--color-mint-20); /* Light Electric Blue background */
    color: var(--colour-electric-blue-on-hover); /* Electric Blue text */
    padding: 0.375rem 0.875rem;
    border-radius: var(--radius-full);
    border: 1px solid var(--colour-electric-blue-on-hover);
    text-decoration: none;
    display: inline-block;
    transition: var(--transition-colors);
    transition-delay: var(--transition-delay-none);
  }

  .card-tag:hover {
    background-color: var(--colour-electric-blue-on-hover); /* Electric Blue background */
    color: var(--color-text-on-dark); /* White text */
    text-decoration: none;
  }

  /* Focus states for accessibility */
  .card-link:focus-visible,
  .card-tag:focus-visible {
    outline: 2px solid var(--colour-electric-blue-on-hover);
    outline-offset: 2px;
    border-radius: var(--radius-sm);
    transition-delay: var(--transition-delay-none);
  }
</style>
